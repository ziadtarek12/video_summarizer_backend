Metadata-Version: 2.4
Name: video-summarizer
Version: 0.1.0
Summary: A CLI tool for transcribing Arabic videos and generating AI-powered summaries and clips
Author-email: Your Name <your.email@example.com>
License: MIT
Keywords: whisper,transcription,video,summarization,arabic,ai
Classifier: Development Status :: 3 - Alpha
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Requires-Python: >=3.9
Description-Content-Type: text/markdown
Requires-Dist: faster-whisper>=1.0.0
Requires-Dist: openai>=1.0.0
Requires-Dist: google-generativeai>=0.3.0
Requires-Dist: yt-dlp>=2023.0.0
Requires-Dist: ffmpeg-python>=0.2.0
Requires-Dist: click>=8.0.0
Requires-Dist: python-dotenv>=1.0.0
Provides-Extra: dev
Requires-Dist: pytest>=7.0.0; extra == "dev"
Requires-Dist: pytest-cov>=4.0.0; extra == "dev"

# Video Summarizer Backend

A modular Python CLI tool for transcribing Arabic videos using Whisper Large v3 and generating AI-powered summaries and clip extractions via Google AI Studio (Gemini) or OpenRouter.

## Features

- ğŸ¬ **Video Transcription**: Transcribe videos to SRT format using Whisper Large v3
- ğŸŒ **YouTube Support**: Directly process YouTube URLs (auto-downloads)
- ğŸ‡¸ğŸ‡¦ **Arabic Support**: Optimized for Arabic language transcription
- ğŸ¤– **Multi-Provider LLM**: Google AI Studio (Gemini) or OpenRouter
- ğŸ“ **AI Summarization**: Generate summaries in original language or English
- âœ‚ï¸ **Clip Extraction**: Automatically identify and extract key moments
- ğŸ”— **Clip Merging**: Combine extracted clips into a single video
- ğŸ’¬ **Video Chat**: Interactive Q&A about video content with streaming responses
- ğŸ¥ **Auto-Export**: Export clips as separate video files

## Installation

### Prerequisites

- Python 3.9+
- FFmpeg installed on your system

### Install from source

```bash
# Clone the repository
git clone <your-repo-url>
cd video_summarizer_backend

# Install dependencies
pip install -r requirements.txt

# Install in development mode
pip install -e ".[dev]"
```

### On Google Colab

```python
# Install FFmpeg
!apt-get install ffmpeg

# Install the package
!pip install -r requirements.txt
!pip install -e .
```

## Configuration

Copy the example environment file and configure your settings:

```bash
cp .env.example .env
```

Edit `.env` with your settings:

```env
# Choose provider: "google" or "openrouter"
LLM_PROVIDER=google

# Google AI Studio (get key from https://aistudio.google.com/)
GOOGLE_API_KEY=your_google_api_key
GOOGLE_MODEL=gemini-1.5-flash

# OpenRouter (get key from https://openrouter.ai/)
OPENROUTER_API_KEY=your_openrouter_key
OPENROUTER_MODEL=meta-llama/llama-3.1-70b-instruct:free

# Whisper settings (defaults are optimized for Arabic)
WHISPER_MODEL=large-v3
WHISPER_LANGUAGE=ar
WHISPER_DEVICE=auto  # auto, cpu, or cuda
```

## Usage

### Transcribe a Video

```bash
# From a local file
video-summarizer transcribe video.mp4 --output transcript.srt

# From a YouTube URL
video-summarizer transcribe "https://youtube.com/watch?v=VIDEO_ID" --output transcript.srt

# Force CPU mode (if CUDA issues)
video-summarizer transcribe video.mp4 --device cpu -o transcript.srt
```

### Summarize a Transcript

```bash
# Summary in original language (e.g., Arabic)
video-summarizer summarize transcript.srt --output-language original

# Summary translated to English
video-summarizer summarize transcript.srt --output-language english

# Use specific provider
video-summarizer summarize transcript.srt --provider google
video-summarizer summarize transcript.srt --provider openrouter
```

### Extract Clips

```bash
# Extract 5 clips
video-summarizer extract-clips transcript.srt --video video.mp4 --num-clips 5

# Extract and merge into single video
video-summarizer extract-clips transcript.srt --video video.mp4 --merge

# Re-encode for accurate cuts
video-summarizer extract-clips transcript.srt --video video.mp4 --reencode
```

### Chat About a Video

Interactive Q&A with streaming responses:

```bash
video-summarizer chat transcript.srt

# Use specific provider
video-summarizer chat transcript.srt --provider google
video-summarizer chat transcript.srt --provider openrouter
```

Commands within chat:
- Type your question and press Enter
- `clear` - Reset conversation history
- `quit` / `exit` / `q` - End session

### Full Pipeline

Process a video through the entire pipeline (transcribe â†’ summarize â†’ extract clips):

```bash
# Basic usage
video-summarizer process video.mp4 --output-dir ./output

# From YouTube with all options
video-summarizer process "https://youtube.com/watch?v=VIDEO_ID" \
    --output-dir ./output \
    --output-language english \
    --num-clips 5 \
    --merge \
    --provider google
```

This will generate:
- `output/transcript.srt` - Full transcription
- `output/summary.txt` - AI-generated summary
- `output/clips.json` - Clip metadata
- `output/clips/` - Extracted video clips
- `output/merged_clips.mp4` - Combined clips (if `--merge`)

## CLI Options Reference

| Option | Commands | Description |
|--------|----------|-------------|
| `--provider`, `-p` | all | LLM provider: `google` or `openrouter` |
| `--output-language`, `-L` | summarize, process | `original` or `english` |
| `--num-clips`, `-n` | extract-clips, process | Number of clips to extract |
| `--merge` | extract-clips, process | Merge clips into single video |
| `--reencode` | extract-clips, process | Re-encode for accurate cuts |
| `--device`, `-d` | transcribe | Device: `auto`, `cpu`, `cuda` |

## Development

### Running Tests

```bash
pytest tests/ -v
```

### Project Structure

```
src/video_summarizer/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ config.py              # Configuration management
â”œâ”€â”€ transcription/
â”‚   â”œâ”€â”€ audio_extractor.py # FFmpeg audio extraction
â”‚   â”œâ”€â”€ youtube_downloader.py # YouTube video downloading
â”‚   â”œâ”€â”€ transcriber.py     # Whisper transcription
â”‚   â””â”€â”€ srt_formatter.py   # SRT format output
â”œâ”€â”€ llm/
â”‚   â”œâ”€â”€ client.py          # Multi-provider LLM client
â”‚   â”œâ”€â”€ chat.py            # Chat session management
â”‚   â”œâ”€â”€ prompts.py         # Prompt templates
â”‚   â”œâ”€â”€ summarizer.py      # Summarization logic
â”‚   â”œâ”€â”€ clip_extractor.py  # FFmpeg clip extraction & merging
â”‚   â””â”€â”€ models.py          # Data models
â””â”€â”€ cli/
    â””â”€â”€ main.py            # CLI commands
```

## License

MIT
